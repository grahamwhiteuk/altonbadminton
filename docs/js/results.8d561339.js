"use strict";(self["webpackChunkaltonbadminton"]=self["webpackChunkaltonbadminton"]||[]).push([[18],{385:function(t,s,a){a.r(s),a.d(s,{default:function(){return c}});var e=function(){var t=this,s=t._self._c;return s("div",{staticClass:"home"},[s("TitleBar",{attrs:{title:"League Fixtures and Results"}}),s("div",{attrs:{id:"contentContainer"}},[s("MainMenu"),s("div",{attrs:{id:"resultsContainer"}},[s("form",[s("label",{staticStyle:{"margin-right":"5px"},attrs:{for:"seasonSelect"}},[t._v("Season")]),s("select",{directives:[{name:"model",rawName:"v-model",value:t.seasonId,expression:"seasonId"}],attrs:{id:"seasonSelect"},on:{change:[function(s){var a=Array.prototype.filter.call(s.target.options,(function(t){return t.selected})).map((function(t){var s="_value"in t?t._value:t.value;return s}));t.seasonId=s.target.multiple?a:a[0]},function(s){return t.updateSeason()}]}},t._l(t.dataDescription,(function(a,e){return s("option",{key:e},[t._v(t._s(e))])})),0)]),s("h2",[t._v("Fixtures and Results for "+t._s(t.seasonId))]),t.render?t._e():s("div",[s("h2",[t._v(t._s(t.loadingMsg))])]),t.render?s("div",t._l(t.seasonData.leagues,(function(a,e){return s("div",{key:e},[s("h3",[t._v(t._s(a.leagueName)+" Division "+t._s(a.division))]),s("div",{staticStyle:{"overflow-x":"auto"}},["points"==a.type?s("table",{staticClass:"results"},[t._m(0,!0),s("tbody",t._l(a.data,(function(a,e){return s("tr",{key:e},[s("td",{staticClass:"l"},[t._v(t._s(a[0]))]),t._v(" "),s("td",{staticClass:"l"},[t._v(t._s(a[1]))]),t._v(" "),s("td",{staticClass:"r br"},[t._v(t._s(a[2]))]),t._v(" "),s("td",{staticClass:"r br"},[t._v(t._s(a[3]))]),t._v(" "),s("td",{staticClass:"r"},[t._v(t._s(a[5]))]),t._v(" "),s("td",{staticClass:"r br"},[t._v(t._s(a[6]))]),t._v(" "),s("td",{staticClass:"l"},[t._v(t._s(a[4]))])])})),0)]):t._e(),"rubbers-games"==a.type?s("table",{staticClass:"results"},[t._m(1,!0),s("tbody",t._l(a.data,(function(a,e){return s("tr",{key:e},[s("td",{staticClass:"l"},[t._v(t._s(a[0]))]),t._v(" "),s("td",{staticClass:"l"},[t._v(t._s(a[1]))]),t._v(" "),s("td",{staticClass:"r br"},[t._v(t._s(a[2]))]),t._v(" "),s("td",{staticClass:"r br"},[t._v(t._s(a[3]))]),t._v(" "),s("td",{staticClass:"r"},[t._v(t._s(a[5]))]),t._v(" "),s("td",{staticClass:"r br"},[t._v(t._s(a[6]))]),t._v(" "),s("td",{staticClass:"r"},[t._v(t._s(a[7]))]),t._v(" "),s("td",{staticClass:"r br"},[t._v(t._s(a[8]))]),t._v(" "),s("td",{staticClass:"l"},[t._v(t._s(a[4]))])])})),0)]):t._e(),"games-rubbers"==a.type?s("table",{staticClass:"results"},[t._m(2,!0),s("tbody",t._l(a.data,(function(a,e){return s("tr",{key:e},[s("td",{staticClass:"l"},[t._v(t._s(a[0]))]),t._v(" "),s("td",{staticClass:"l"},[t._v(t._s(a[1]))]),t._v(" "),s("td",{staticClass:"r br"},[t._v(t._s(a[2]))]),t._v(" "),s("td",{staticClass:"r br"},[t._v(t._s(a[3]))]),t._v(" "),s("td",{staticClass:"r"},[t._v(t._s(a[5]))]),t._v(" "),s("td",{staticClass:"r br"},[t._v(t._s(a[6]))]),t._v(" "),s("td",{staticClass:"r"},[t._v(t._s(a[7]))]),t._v(" "),s("td",{staticClass:"r br"},[t._v(t._s(a[8]))]),t._v(" "),s("td",{staticClass:"l"},[t._v(t._s(a[4]))])])})),0)]):t._e(),"games"==a.type?s("table",{staticClass:"results"},[t._m(3,!0),s("tbody",t._l(a.data,(function(a,e){return s("tr",{key:e},[s("td",{staticClass:"l"},[t._v(t._s(a[0]))]),t._v(" "),s("td",{staticClass:"l"},[t._v(t._s(a[1]))]),t._v(" "),s("td",{staticClass:"r br"},[t._v(t._s(a[2]))]),t._v(" "),s("td",{staticClass:"r br"},[t._v(t._s(a[3]))]),t._v(" "),s("td",{staticClass:"r"},[t._v(t._s(a[5]))]),t._v(" "),s("td",{staticClass:"r br"},[t._v(t._s(a[6]))]),t._v(" "),s("td",{staticClass:"l"},[t._v(t._s(a[4]))])])})),0)]):t._e()])])})),0):t._e()])],1)],1)},r=[function(){var t=this,s=t._self._c;return s("thead",[s("tr",[s("th",{attrs:{colspan:"3"}},[t._v("Date")]),s("th",[t._v("Home")]),s("th",{attrs:{colspan:"2"}},[t._v("Points")]),s("th",[t._v("Away")])])])},function(){var t=this,s=t._self._c;return s("thead",[s("tr",[s("th",{attrs:{colspan:"3"}},[t._v("Date")]),s("th",[t._v("Home")]),s("th",{attrs:{colspan:"2"}},[t._v("Rubbers")]),s("th",{attrs:{colspan:"2"}},[t._v("Games")]),s("th",[t._v("Away")])])])},function(){var t=this,s=t._self._c;return s("thead",[s("tr",[s("th",{attrs:{colspan:"3"}},[t._v("Date")]),s("th",[t._v("Home")]),s("th",{attrs:{colspan:"2"}},[t._v("Games")]),s("th",{attrs:{colspan:"2"}},[t._v("Rubbers")]),s("th",[t._v("Away")])])])},function(){var t=this,s=t._self._c;return s("thead",[s("tr",[s("th",{attrs:{colspan:"3"}},[t._v("Date")]),s("th",[t._v("Home")]),s("th",{attrs:{colspan:"2"}},[t._v("Games")]),s("th",[t._v("Away")])])])}],n=a(4337),i=a(3400),l=a(9158),o={name:"results",mixins:[l.W],components:{TitleBar:n.Z,MainMenu:i.Z},computed:{seasonData(){return void 0!==this.$store.state.season[this.seasonId]?this.$store.state.season[this.seasonId]:{leagues:[]}}},data(){return{seasonId:"",render:!1,loadingMsg:"Loading..."}},mounted(){this.seasonId=this.$store.state.currentSeason,this.updateSeason()},methods:{updateSeason:function(){let t=this.seasonId;this.render=!1,this.$store.state.season[t]?this.render=!0:(this.loadingMsg="Loading...",this.getCSVData(t).then((s=>{s.includes(void 0)?this.loadingMsg="Failed to load results data":("string"===typeof s[0]&&(s=this.parseCSVData(s)),this.storeParsedCSVData(t,s),this.render=!0)}),(()=>{this.loadingMsg="Failed to load results data"})))}}},_=o,d=a(1001),v=(0,d.Z)(_,e,r,!1,null,"d67ea416",null),c=v.exports},9158:function(t,s,a){a.d(s,{W:function(){return e}});a(7658);const e={computed:{dataDescription(){return this.$store.state.dataDescription}},methods:{getCSVData:function(t){let s=this.dataDescription[t].map((s=>{if("local"===s.location)return`/data/${t}/${s.fileName}`;if("sheets"===s.location&&s.sheetId){let t=`https://sheets.googleapis.com/v4/spreadsheets/${s.sheetId}/values`,a="AIzaSyC-PzW649nV3K-Dgh_ZAf3cOL6I5XHOfzg";return`${t}/${s.sheetName}!A1%3AZ99?key=${a}`}}));return Promise.all(s.map((t=>fetch(t).then((t=>{let s=t.headers.get("Content-Type");return s.startsWith("text/csv")?t.text():s.startsWith("application/json")?t.json().then((t=>{if(void 0!==t.values)return t.values})):void 0})))))},parseCSVData:function(t){let s=[];for(let a of t){let t=[];for(let s of a.split("\n")){let a=s.split(",");a.length>1&&t.push(a)}s.push(t)}return s},storeParsedCSVData:function(t,s){let a={seasonId:t,season:{leagues:[]}};for(let e in this.dataDescription[t]){let r=this.dataDescription[t][e],n=s[e].shift();a.season.leagues.push({leagueName:r.leagueName,division:r.division,type:r.type,header:n,data:s[e]})}this.$store.commit("addSeason",a)}}}}}]);